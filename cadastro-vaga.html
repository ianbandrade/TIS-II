<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Cadastro Vaga</title>
    <link rel="stylesheet" type="text/css" href="Frontend/node_modules/semantic-ui/dist/semantic.min.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="Frontend/node_modules/semantic-ui/dist/semantic.min.js"></script>
    <script src="Frontend/node_modules/jquery-mask-plugin/dist/jquery.mask.min.js"></script>
</head>

<body style="margin: 5%">
    <form class="ui form">
        <h1>Cadastro de Vaga</h1>
        <br>
        <div class="dados_locador">
            <h3>Informações Locatário</h3>
            <div class="field">
                <label for="nome">Nome (*)</label>
                <input class="required" type="text" name="nome" placeholder="Nome" required="True">
            </div>
            <div class="field">
                <label for="sobrenome">Sobrenome (*)</label>
                <input class="required" type="text" name="sobrenome" placeholder="Sobrenome" required="True">
            </div>
        </div>
        <br>
        <hr>
        <br>
        <div class="dados_vaga">
            <h3>Informações Vaga</h3>
            <br>
            <div class="detalhes">
                <h4>Detalhes</h4>
                <div class="field">
                    <label for="indicador_vaga">Indicador da Vaga (*)</label>
                    <input class="required" type="text" name="indicador_vaga" placeholder="ex: Vaga 42B/ apto. 402"
                        required="True">
                </div>
                <div class="field">
                    <label for="foto_vaga">Foto da vaga</label>
                    <input class="required" type="file" name="foto_vaga" placeholder="Foto">
                </div>
                <div class="field">
                    <label>Descrição</label>
                    <textarea rows="2" placeholder="Descrição da Vaga"></textarea>
                </div>
            </div>
            <br>
            <div class="dimensoes">
                <h4>Dimensões</h4>
                <div class="field">
                    <label for="largura">Largura (*)</label>
                    <input class="required" type="number" step="0.1" name="largura" placeholder="Largura (metros)"
                        required="True">
                </div>
                <div class="field">
                    <label for="comprimento">Comprimento (*)</label>
                    <input class="required" type="number" step="0.1" name="comprimento"
                        placeholder="Comprimento (metros)" required="True">
                </div>
                <div class="field">
                    <label for="altura">Altura (*)</label>
                    <input class="required" type="number" step="0.1" name="altura" placeholder="Altura (metros)"
                        required="True">
                </div>
            </div>
            <div class="localizacao">
                <br>
                <h4>Localização</h4>
                <div id="cep-field" class="field">
                    <label for="cep">CEP (*)</label>
                    <input id="cep" class="required" type="text" name="cep" placeholder="CEP" required="True">
                </div>
                <div class="field">
                    <label for="endereco">Endereço (*)</label>
                    <input id="endereco" class="required" type="text" name="endereco" placeholder="Endereço"
                        required="True">
                </div>
                <div class="field">
                    <label for="numero">Numero (*)</label>
                    <input id="numero" class="required" type="text" name="numero" placeholder="Numero" required="True">
                </div>
                <div class="field">
                    <label for="bairro">Bairro (*)</label>
                    <input id="bairro" class="required" type="text" name="bairro" placeholder="Bairro" required="True">
                </div>
                <div class="field">
                    <label for="cidade">Cidade (*)</label>
                    <input id="cidade" class="required" type="text" name="cidade" placeholder="Cidade" required="True">
                </div>
                <div class="field">
                    <label for="Estado">Estado (*)</label>
                    <select id="estado" class="ui fluid dropdown" required="True">
                        <option value="" disabled selected value>Selecione um estado</option>
                        <option value="AC">Acre</option>
                        <option value="AL">Alagoas</option>
                        <option value="AP">Amapá</option>
                        <option value="AM">Amazonas</option>
                        <option value="BA">Bahia</option>
                        <option value="CE">Ceará</option>
                        <option value="DF">Distrito Federal</option>
                        <option value="ES">Espírito Santo</option>
                        <option value="GO">Goiás</option>
                        <option value="MA">Maranhão</option>
                        <option value="MT">Mato Grosso</option>
                        <option value="MS">Mato Grosso do Sul</option>
                        <option value="MG">Minas Gerais</option>
                        <option value="PA">Pará</option>
                        <option value="PB">Paraíba</option>
                        <option value="PR">Paraná</option>
                        <option value="PE">Pernambuco</option>
                        <option value="PI">Piauí</option>
                        <option value="RJ">Rio de Janeiro</option>
                        <option value="RN">Rio Grande do Norte</option>
                        <option value="RS">Rio Grande do Sul</option>
                        <option value="RO">Rondônia</option>
                        <option value="RR">Roraima</option>
                        <option value="SC">Santa Catarina</option>
                        <option value="SP">São Paulo</option>
                        <option value="SE">Sergipe</option>
                        <option value="TO">Tocantins</option>
                    </select>
                </div>
            </div>
        </div>
        <br>
        <p style="color: red">(*) Itens Obrigatórios</p>
        <button id="submit-form" class="ui button" type="submit">Enviar</button>
    </form>


    <br>
    <br>
    <br>


</body>

<script>
    $(document).ready(function () {
        //mascaras
        $('#cep').mask('00000-000');
        $('#numero').mask('000000');

        //Muda a cor dos campos não preenchidos ao tentar enviar
        $('#submit-form').click(function () {
            $('.required').each(function () {
                if (!$(this).val()) {
                    $(this).parent().addClass("ui error");
                }
            });
        });

        //Volta a cor dos campos para a normal se preenchidos
        $('.required').blur(function () {
            $('.required').each(function () {
                if ($(this).val()) {
                    $(this).parent().removeClass("ui error");
                }
            });
        });

    function limpa_form_cep() {
        $('#endereco').val("");
        $('#bairro').val("");
        $('#cidade').val("");
        $('#estado').val("");
        $('#endereco').prop('readOnly', false);
        $('#bairro').prop('readOnly', false);
        $('#cidade').prop('readOnly', false);
        $('#estado').prop('disabled', false);
    }

    function cep_encontrado() {
        $('#endereco').prop('readOnly', true);
        $('#bairro').prop('readOnly', true);
        $('#cidade').prop('readOnly', true);
        $('#estado').prop('disabled', true);
    }

    $('#cep').blur(function () {

    var cep = $(this).val().replace(/\D/g, '');

    if (cep != "") {

        var validacep = /^[0-9]{8}$/;

        if (validacep.test(cep)) {

            $("#endereco").val("...");
            $("#bairro").val("...");
            $("#cidade").val("...");
            $("#estado").val("...");

            $.getJSON("https://viacep.com.br/ws/" + cep + "/json/?callback=?", function (
                dados) {
                console.log(dados);
                if (!("erro" in dados)) {
                    $('#endereco').val(dados.logradouro);
                    $('#bairro').val(dados.bairro);
                    $('#cidade').val(dados.localidade);
                    $('#estado').val(dados.uf);
                    $('#cep-field').removeClass("ui input error");
                    cep_encontrado();
                } else {
                    limpa_form_cep();
                    alert("CEP não encontrado!");
                    $('#cep-field').addClass("ui error");
                    $('#cep').val("");
                }
            });
        } else {
            limpa_form_cep();
            alert("CEP inválido!");
            $('#cep-field').addClass("ui error");
            $('#cep').val("");
        }
    } else {
        limpa_form_cep();
    }
    });
    })
</script>

</html>